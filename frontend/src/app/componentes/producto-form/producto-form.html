<form #form="ngForm" (ngSubmit)="onSubmit()">
  
  <div class="mb-3">
    <label for="nombre" class="form-label">Nombre</label>
    <input type="text" class="form-control" id="nombre" name="nombre" [(ngModel)]="producto.nombre" required #nombre="ngModel">
    <div *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)" class="text-danger small mt-1">
      El nombre es requerido.
    </div>
  </div>

  <div class="mb-3">
    <label for="codigo" class="form-label">Código</label>
    <input type="text" class="form-control" id="codigo" name="codigo" [(ngModel)]="producto.codigo" required #codigo="ngModel">
    <div *ngIf="codigo.invalid && (codigo.dirty || codigo.touched)" class="text-danger small mt-1">
      El código es requerido.
    </div>
  </div>

  <div class="mb-3">
    <label for="descripcion" class="form-label">Descripción</label>
    <textarea class="form-control" id="descripcion" name="descripcion" [(ngModel)]="producto.descripcion" rows="3"></textarea>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="precio" class="form-label">Precio</label>
      <div class="input-group">
        <span class="input-group-text">S/</span>
        <input type="number" class="form-control" id="precio" name="precio" [(ngModel)]="producto.precio" required min="0.01" step="0.01" #precio="ngModel">
      </div>
      <div *ngIf="precio.invalid && (precio.dirty || precio.touched)" class="text-danger small mt-1">
        El precio es requerido y debe ser mayor a 0.
      </div>
    </div>

    <div class="col-md-6 mb-3">
      <label for="cantidad" class="form-label">Cantidad</label>
      <input type="number" class="form-control" id="cantidad" name="cantidad" [(ngModel)]="producto.cantidad" required min="0" #cantidad="ngModel">
      <div *ngIf="cantidad.invalid && (cantidad.dirty || cantidad.touched)" class="text-danger small mt-1">
        La cantidad es requerida y no puede ser negativa.
      </div>
    </div>
  </div>

  <div class="mb-3">
    <label for="fecha_vencimiento" class="form-label">Fecha Vencimiento</label>
    <input type="date" class="form-control" id="fecha_vencimiento" name="fecha_vencimiento" [(ngModel)]="producto.fecha_vencimiento" required #fecha="ngModel">
    <div *ngIf="fecha.invalid && (fecha.dirty || fecha.touched)" class="text-danger small mt-1">
      La fecha de vencimiento es requerida.
    </div>
  </div>
  
  <div class="d-flex justify-content-end mt-4 border-top pt-3">
    <a routerLink="/productos" class="btn btn-secondary me-2">Cancelar</a>
    <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
      <i class="bi bi-check-circle"></i> Guardar Producto
    </button>
  </div>

</form>